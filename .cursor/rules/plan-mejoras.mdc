---
description: Plan de mejoras y roadmap para RincÃ³n DiabÃ©tico
globs: 
alwaysApply: true
---

# Plan de Mejoras - RincÃ³n DiabÃ©tico ðŸš€

## Estado Actual del AnÃ¡lisis âœ…
- âœ… **AnÃ¡lisis completo realizado** (Enero 2025)
- âœ… **Problemas crÃ­ticos identificados**
- âœ… **Plan de acciÃ³n definido**
- âŒ **WebPay Plus descartado** (requiere contrato pagado)

## ðŸš¨ PROBLEMAS CRÃTICOS IDENTIFICADOS

### 1. Sistema de Pagos
- âŒ WebPay Plus no implementado (requiere pago)
- âœ… MercadoPago funcional
- ðŸ”„ **ACCIÃ“N**: Mejorar flujo de transferencia bancaria

### 2. GestiÃ³n de Stock
- âŒ Sin control de stock en tiempo real
- âŒ Productos sin stock siguen vendibles
- ðŸ”„ **ACCIÃ“N**: Implementar validaciÃ³n en tiempo real

### 3. Sistema de Notificaciones
- âŒ Sin emails de confirmaciÃ³n
- âŒ Sin notificaciones WhatsApp automÃ¡ticas
- ðŸ”„ **ACCIÃ“N**: Implementar Resend para emails

### 4. Dashboard Admin
- âš ï¸ Solo estadÃ­sticas bÃ¡sicas
- âŒ Sin reportes de ventas
- âŒ Sin mÃ©tricas de conversiÃ³n
- ðŸ”„ **ACCIÃ“N**: Dashboard avanzado

## ðŸ“‹ PLAN DE ACCIÃ“N PRIORIZADO

### **FASE 1: CrÃ­tico para Ventas (Semana 1-2)**
```typescript
// Prioridad: CRÃTICA ðŸ”´
```

#### 1.1 Sistema de Emails (Resend)
- **Archivo**: `src/lib/email.ts`
- **API**: `src/app/api/emails/`
- **Templates**: ConfirmaciÃ³n pedidos, cambios estado
- **Costo**: GRATIS (100 emails/mes)

#### 1.2 Control de Stock Real
- **Archivo**: `src/components/client/add-to-cart-button.tsx`
- **ValidaciÃ³n**: Tiempo real en carrito
- **Reserva**: Temporal durante checkout (15min)
- **Costo**: GRATIS

#### 1.3 Transferencia Bancaria Mejorada
- **QR**: Generar QR de cuenta bancaria
- **Instrucciones**: MÃ¡s claras y paso a paso
- **ConfirmaciÃ³n**: Subir comprobante
- **Costo**: GRATIS

#### 1.4 WhatsApp Manual Optimizado
- **Enlaces**: wa.me automÃ¡ticos
- **Templates**: Mensajes predefinidos
- **Admin**: Copy/paste optimizado
- **Costo**: GRATIS

### **FASE 2: AdministraciÃ³n (Semana 3-4)**
```typescript
// Prioridad: ALTA ðŸŸ¡
```

#### 2.1 Dashboard Avanzado
- **Reportes**: Ventas por perÃ­odo
- **MÃ©tricas**: Productos mÃ¡s vendidos
- **Alertas**: Stock bajo, pedidos pendientes
- **GrÃ¡ficos**: Charts.js o Recharts

#### 2.2 GestiÃ³n de Horarios
- **Horarios especiales**: Feriados, vacaciones
- **Slots**: Disponibilidad por hora
- **Capacidad**: LÃ­mite de pedidos por slot

#### 2.3 Sistema de Reservas
- **Calendario**: SelecciÃ³n fecha/hora
- **ValidaciÃ³n**: Horarios disponibles
- **ConfirmaciÃ³n**: AutomÃ¡tica con lÃ­mites

### **FASE 3: UX y Funcionalidades (Mes 2)**
```typescript
// Prioridad: MEDIA ðŸŸ¢
```

#### 3.1 BÃºsqueda Avanzada
- **Filtros**: Precio, ingredientes, categorÃ­a
- **Ordenamiento**: Precio, popularidad, fecha
- **Autocompletado**: Sugerencias dinÃ¡micas

#### 3.2 Calculadora Nutricional
- **InformaciÃ³n**: Carbohidratos, azÃºcares
- **Porciones**: Por tamaÃ±o de torta
- **Alertas**: Recomendaciones para diabÃ©ticos

#### 3.3 Sistema de Favoritos
- **Wishlist**: Productos favoritos
- **Compartir**: Enlaces de listas
- **Notificaciones**: Productos en oferta

## ðŸ› ï¸ IMPLEMENTACIÃ“N TÃ‰CNICA

### Estructura de Archivos Nuevos
```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ email.ts              # âœ… Resend integration
â”‚   â”œâ”€â”€ stock.ts              # âœ… Stock validation
â”‚   â””â”€â”€ whatsapp.ts           # âœ… WhatsApp helpers
â”œâ”€â”€ app/api/
â”‚   â”œâ”€â”€ emails/               # âœ… Email endpoints
â”‚   â”œâ”€â”€ stock/                # âœ… Stock management
â”‚   â””â”€â”€ reports/              # âœ… Admin reports
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”œâ”€â”€ reports-chart.tsx # âœ… Dashboard charts
â”‚   â”‚   â”œâ”€â”€ stock-alerts.tsx  # âœ… Stock notifications
â”‚   â”‚   â””â”€â”€ schedule-manager.tsx # âœ… Horarios
â”‚   â””â”€â”€ client/
â”‚       â”œâ”€â”€ stock-indicator.tsx # âœ… Stock display
â”‚       â””â”€â”€ favorites-button.tsx # âœ… Wishlist
â””â”€â”€ hooks/
    â”œâ”€â”€ use-stock.ts          # âœ… Stock management
    â””â”€â”€ use-favorites.ts      # âœ… Favorites logic
```

### Dependencies Nuevas
```json
{
  "resend": "^3.0.0",           // Emails
  "recharts": "^2.8.0",        // Charts
  "date-fns": "^3.0.0",        // Date handling
  "qrcode": "^1.5.3"           // QR generation
}
```

## ðŸ“Š MÃ‰TRICAS DE Ã‰XITO

### KPIs Fase 1
- âœ… **Emails enviados**: >95% entregados
- âœ… **Stock accuracy**: 0 sobreventas
- âœ… **Transferencias**: +50% conversiÃ³n
- âœ… **WhatsApp**: <2min respuesta admin

### KPIs Fase 2
- âœ… **Dashboard usage**: Admin usa reportes diarios
- âœ… **Horarios**: 0 conflictos de reserva
- âœ… **Eficiencia**: -30% tiempo gestiÃ³n pedidos

### KPIs Fase 3
- âœ… **BÃºsqueda**: +40% productos encontrados
- âœ… **Calculadora**: +25% conversiÃ³n diabÃ©ticos
- âœ… **Favoritos**: +20% repeat customers

## ðŸš« FUNCIONALIDADES DESCARTADAS (Por Ahora)

### WebPay Plus
- **RazÃ³n**: Requiere contrato pagado con Transbank
- **Alternativa**: MercadoPago + Transferencia mejorada
- **Futuro**: Implementar cuando facturaciÃ³n justifique costo

### WhatsApp Business API
- **RazÃ³n**: Costo mensual + setup complejo
- **Alternativa**: Enlaces wa.me optimizados
- **Futuro**: Cuando >100 pedidos/mes

### Analytics Avanzado
- **RazÃ³n**: Complejidad vs beneficio actual
- **Alternativa**: Google Analytics bÃ¡sico
- **Futuro**: Cuando >1000 usuarios/mes

## ðŸ”„ PROCESO DE DESARROLLO

### Workflow
1. **Branch**: `feature/fase-1-emails`
2. **Testing**: Cada funcionalidad en staging
3. **Deploy**: Incremental, sin downtime
4. **Monitoring**: Logs y mÃ©tricas en producciÃ³n

### Quality Gates
- âœ… **TypeScript**: Strict mode, 0 errores
- âœ… **Testing**: Unit tests crÃ­ticos
- âœ… **Performance**: Lighthouse >90
- âœ… **Mobile**: Responsive en 3 dispositivos

## ðŸ“… TIMELINE REALISTA

```
Semana 1: Emails + Stock control
Semana 2: Transferencia + WhatsApp
Semana 3: Dashboard reports
Semana 4: Horarios + Reservas
Mes 2: UX improvements
```

## ðŸŽ¯ PRÃ“XIMOS PASOS INMEDIATOS

1. **Instalar Resend**: `npm install resend`
2. **Setup email templates**
3. **Implementar stock validation**
4. **Mejorar transferencia flow**

---

**Ãšltima actualizaciÃ³n**: Enero 2025
**Responsable**: Desarrollo
**Review**: Semanal 